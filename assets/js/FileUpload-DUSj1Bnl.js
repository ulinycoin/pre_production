import{e as M,av as j,u as z,J as Z,r as k,j as t,aw as F}from"./index-BaqsOxPK.js";const $=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],G=M("circle-alert",$);const J=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],U=M("lightbulb",J),w={MAX_FILE_SIZE_MB:50,MAX_BATCH_FILES:2,MAX_PAGES:50},b={MAX_FILE_SIZE_MB:2e3,MAX_BATCH_FILES:50,MAX_PAGES:5e3},P="localpdf_downloads_tracker";class A{static canProcessFile(r,s,o){const a=s==="pro"||s==="lifetime",l=o??(a?b.MAX_FILE_SIZE_MB:w.MAX_FILE_SIZE_MB);return r.size/(1024*1024)>l?{can:!1,reason:a?"upload.errors.fileTooLargePro":"upload.errors.fileTooLargeFree"}:{can:!0}}static canBatchProcess(r,s,o){const a=s==="pro"||s==="lifetime",l=o??(a?b.MAX_BATCH_FILES:w.MAX_BATCH_FILES);return r>l?{can:!1,reason:a?"upload.errors.tooManyFilesPro":"upload.errors.tooManyFilesFree"}:{can:!0}}static getLimits(r){return r==="free"?w:b}static isProTool(r){return j.limits.PRO_TOOLS.includes(r)}static getRemainingProDownloads(r){if(r!=="free")return 1/0;const s=this.getTracker(),o=j.limits.DAILY_FREE_PRO_DOWNLOADS;return Math.max(0,o-s.downloadedToolIds.length)}static recordDownload(r,s,o=!1){if(s!=="free"||!this.isProTool(r)||o)return;const a=this.getTracker();a.downloadedToolIds.push(r),localStorage.setItem(P,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("localpdf:limits_updated"))}static getTracker(){const r=new Date().toISOString().split("T")[0],s=localStorage.getItem(P);if(s)try{const a=JSON.parse(s);if(a.date===r)return a}catch(a){console.error("Failed to parse download tracker",a)}return{date:r,downloadedToolIds:[]}}}const q=({accept:f=".pdf",multiple:r=!0,onFilesSelected:s,maxFiles:o,maxSizeMB:a=100,disabled:l=!1,title:v,description:S})=>{const{t:i}=z(),{status:x}=Z(),I=k.useRef(null),[m,g]=k.useState(!1),[E,h]=k.useState(null),N=e=>{h(null);const p=A.canBatchProcess(e.length,x,o);if(!p.can){const d=o??(x==="pro"||x==="lifetime"?50:2);return h(i(p.reason,{max:d})),null}const c=f.split(",").map(n=>n.trim());if(e.filter(n=>{const d="."+n.name.split(".").pop()?.toLowerCase(),L=n.type.toLowerCase(),y=c.includes(d),H=c.some(T=>T.includes("/")?L===T:!1);return!y&&!H}).length>0)return h(i("upload.errors.invalidFileType")),null;for(const n of e){const d=A.canProcessFile(n,x,a);if(!d.can){const y=a??(x==="pro"||x==="lifetime"?2e3:50);return h(i(d.reason,{max:y})),null}}return e},_=e=>{if(!e||e.length===0)return;const p=Array.from(e),c=N(p);c&&s(c)},D=e=>{e.preventDefault(),e.stopPropagation(),g(!1),!l&&_(e.dataTransfer.files)},C=e=>{e.preventDefault(),e.stopPropagation(),l||g(!0)},O=e=>{e.preventDefault(),e.stopPropagation(),g(!1)},B=()=>{l||I.current?.click()},R=e=>{_(e.target.files),e.target.value=""},X=e=>{if(e.preventDefault(),l)return;const p=e.clipboardData?.items;if(!p)return;const c=[];for(let u=0;u<p.length;u++){const n=p[u];if(n.kind==="file"){const d=n.getAsFile();d&&c.push(d)}}if(c.length>0){const u=new DataTransfer;c.forEach(n=>u.items.add(n)),_(u.files)}};return t.jsxs("div",{className:"file-upload w-full",children:[t.jsxs("div",{onDrop:D,onDragOver:C,onDragLeave:O,onPaste:X,onClick:B,tabIndex:0,className:`
            relative w-full max-w-5xl mx-auto min-h-[50vh] flex flex-col items-center justify-center
            text-center cursor-pointer
            transition-all duration-700 ease-out outline-none
            rounded-[3rem]
            backdrop-blur-3xl
            ${m?"bg-ocean-100/80 dark:bg-ocean-800/80 shadow-[0_20px_80px_rgba(0,0,0,0.2)] scale-[1.01] -translate-y-2":"border border-white/20 dark:border-white/5 bg-white/20 dark:bg-[#1c1c1e]/40 shadow-[0_20px_50px_-12px_rgba(0,0,0,0.15)] dark:shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)] hover:shadow-[0_40px_80px_-20px_rgba(0,0,0,0.25)] dark:hover:shadow-[0_40px_80px_-20px_rgba(0,0,0,0.7)] hover:-translate-y-3"}
            ${l?"opacity-50 cursor-not-allowed":""}
          `,children:[t.jsx("input",{ref:I,type:"file",accept:f,multiple:r,onChange:R,disabled:l,className:"hidden","aria-label":i("upload.selectFiles")}),t.jsxs("div",{className:"group relative z-10 flex flex-col items-center justify-center space-y-8 p-12",children:[t.jsx("div",{className:`p-8 rounded-[2rem] bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 text-gray-700 dark:text-gray-200 transition-all duration-500 shadow-xl ${m?"scale-110 shadow-2xl rotate-3":"group-hover:scale-105 group-hover:-rotate-3"}`,children:m?t.jsx(F,{className:"w-24 h-24 text-accent-blue animate-bounce"}):t.jsx(F,{className:"w-24 h-24 text-gray-600 dark:text-gray-400"})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:m?i("upload.dropHere"):v||i("upload.selectFiles")}),t.jsx("p",{className:"text-xl text-gray-500 dark:text-gray-400 font-medium",children:S||i("upload.dragOrClick")}),t.jsx("div",{className:"pt-4 flex items-center justify-center gap-2",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-white/10 shadow-sm text-xs font-medium text-gray-600 dark:text-gray-300 bg-white/50 dark:bg-white/5",children:[t.jsx(U,{className:"w-3.5 h-3.5 text-accent-blue"}),i("upload.pasteHint")]})})]}),t.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 pt-4 flex gap-4 border-t border-white/10",children:[o&&t.jsxs("p",{children:[i("upload.maxFiles"),": ",o]}),t.jsxs("p",{children:[i("upload.maxSize"),": ",a," MB"]}),t.jsxs("p",{className:"hidden md:block",children:[i("upload.acceptedTypes"),": ",f]})]})]})]}),E&&t.jsxs("div",{className:"mt-6 max-w-5xl mx-auto p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl flex items-center gap-3 text-red-700 dark:text-red-300 animate-slide-up",children:[t.jsx(G,{className:"w-5 h-5 flex-shrink-0"}),t.jsx("p",{className:"text-sm font-medium",children:E})]})]})};export{G as C,q as F,A as L};
