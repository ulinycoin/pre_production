import{r as e,o as D}from"./index-BaqsOxPK.js";import{g as F,G as L}from"./vendor-pdfjs-BlOy0ZkI.js";L.workerSrc=D;const B=({file:n,thumbnailWidth:h=150,thumbnailHeight:m=200,onProgress:o})=>{const[v,p]=e.useState([]),[x,c]=e.useState(!1),[C,f]=e.useState(null),[P,d]=e.useState(0),w=e.useRef(o);e.useEffect(()=>{w.current=o},[o]);const i=e.useCallback(async()=>{if(!n){p([]),d(0);return}try{c(!0),f(null);const r=await n.arrayBuffer(),b=await F({data:r}).promise,g=b.numPages;d(g);const T=[];for(let t=1;t<=g;t++){const l=await b.getPage(t),E=l.getViewport({scale:1}),S=Math.min(h/E.width,m/E.height),a=l.getViewport({scale:S}),s=document.createElement("canvas"),k=s.getContext("2d");if(!k)continue;s.width=a.width,s.height=a.height,await l.render({canvasContext:k,viewport:a,canvas:s}).promise;const y=s.toDataURL("image/png");T.push({pageNumber:t,dataUrl:y,width:a.width,height:a.height}),w.current?.(t,g)}p(T),c(!1)}catch(r){const u=r instanceof Error?r:new Error("Failed to generate thumbnails");console.error("usePDFThumbnails error:",u),f(u.message),c(!1)}},[n,h,m]);return e.useEffect(()=>{i()},[i]),{thumbnails:v,isLoading:x,error:C,pageCount:P,regenerateThumbnails:i}};export{B as u};
